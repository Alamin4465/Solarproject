<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>рж▓ржЧржЗржи - рж╕рзЛрж▓рж╛рж░ ржкрж╛ржУрзЯрж╛рж░ ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯ</title>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.8.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.8.0/firebase-auth-compat.js"></script>
<link rel="stylesheet" href="login.css">

</head>
<body>

<div class="login-container">

    <h1>тШАя╕П рж╕рзЛрж▓рж╛рж░ ржбрзНржпрж╛рж╢ржмрзЛрж░рзНржб</h1>
    <p>рж╕рзНржорж╛рж░рзНржЯ рж╕рзЛрж▓рж╛рж░ ржкрж╛ржУрзЯрж╛рж░ ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯ рж╕рж┐рж╕рзНржЯрзЗржо</p>

    <!-- Login Box -->
    <div id="loginBox">
        <h2>ржЕрзНржпрж╛ржХрж╛ржЙржирзНржЯрзЗ рж▓ржЧржЗржи ржХрж░рзБржи</h2>
        <form id="loginForm">
            <div class="form-group">
                <label>ржЗржорзЗржЗрж▓ ржарж┐ржХрж╛ржирж╛</label>
                <input type="email" id="loginEmail" placeholder="ржЖржкржирж╛рж░ ржЗржорзЗржЗрж▓ ржжрж┐ржи" required>
            </div>
            <div class="form-group">
                <label>ржкрж╛рж╕ржУрзЯрж╛рж░рзНржб</label>
                <input type="password" id="loginPassword" placeholder="ржкрж╛рж╕ржУрзЯрж╛рж░рзНржб ржжрж┐ржи" required>
                <div class="password-toggle" onclick="togglePassword('loginPassword')">ЁЯСБя╕П</div>
            </div>
            <button type="submit">рж▓ржЧржЗржи</button>
        </form>

        <div class="divider">ржЕржержмрж╛</div>
        <button class="google-login-btn" onclick="handleGoogleLogin()">
            <img src="https://img.icons8.com/color/16/000000/google-logo.png" alt="Google">
            Google ржжрж┐рзЯрзЗ рж▓ржЧржЗржи
        </button>

        <a class="forgot-password" onclick="showForgotPassword()">ржкрж╛рж╕ржУрзЯрж╛рж░рзНржб ржнрзБрж▓рзЗ ржЧрзЗржЫрзЗржи?</a>
        <p class="register-link" onclick="showRegister()">ржирждрзБржи ржЕрзНржпрж╛ржХрж╛ржЙржирзНржЯ рждрзИрж░рж┐ ржХрж░рзБржи</p>
    </div>

    <!-- Register Box -->
    <div id="registerBox" style="display:none;">
        <h2>ржирждрзБржи ржЕрзНржпрж╛ржХрж╛ржЙржирзНржЯ рждрзИрж░рж┐ ржХрж░рзБржи</h2>
        <div class="form-group">
            <label>ржЗржорзЗржЗрж▓ ржарж┐ржХрж╛ржирж╛</label>
            <input type="email" id="registerEmail" placeholder="ржЗржорзЗржЗрж▓ ржжрж┐ржи">
        </div>
        <div class="form-group">
            <label>ржкрж╛рж╕ржУрзЯрж╛рж░рзНржб</label>
            <input type="password" id="registerPassword" placeholder="ржкрж╛рж╕ржУрзЯрж╛рж░рзНржб ржжрж┐ржи">
            <div class="password-toggle" onclick="togglePassword('registerPassword')">ЁЯСБя╕П</div>
        </div>
        <div class="form-group">
            <label>ржкрж╛рж╕ржУрзЯрж╛рж░рзНржб ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзБржи</label>
            <input type="password" id="confirmPassword" placeholder="ржкрж╛рж╕ржУрзЯрж╛рж░рзНржб ржЖржмрж╛рж░ ржжрж┐ржи">
            <div class="password-toggle" onclick="togglePassword('confirmPassword')">ЁЯСБя╕П</div>
        </div>
        <div class="form-group">
            <label>ржкрзБрж░рзЛ ржирж╛ржо (ржРржЪрзНржЫрж┐ржХ)</label>
            <input type="text" id="fullName" placeholder="ржЖржкржирж╛рж░ ржирж╛ржо">
        </div>
        <label><input type="checkbox" id="acceptTerms"> ржЖржорж┐ рж╕рзЗржмрж╛ рж╢рж░рзНрждрж╛ржмрж▓рзА ржУ ржЧрзЛржкржирзАрзЯрждрж╛ ржирзАрждрж┐ ржорзЗржирзЗ ржирж┐рзЯрзЗржЫрж┐</label>
        <button class="register-btn">рж░рзЗржЬрж┐рж╕рзНржЯрж╛рж░ ржХрж░рзБржи</button>
        <p class="login-link" onclick="showLogin()">ржЗрждрж┐ржоржзрзНржпрзЗ ржЕрзНржпрж╛ржХрж╛ржЙржирзНржЯ ржЖржЫрзЗ? рж▓ржЧржЗржи ржХрж░рзБржи</p>
    </div>

    <!-- Forgot Password Box -->
    <div id="forgotPasswordBox" style="display:none;">
        <h2>ржкрж╛рж╕ржУрзЯрж╛рж░рзНржб рж░рж┐рж╕рзЗржЯ ржХрж░рзБржи</h2>
        <div class="form-group">
            <label>ржЗржорзЗржЗрж▓ ржарж┐ржХрж╛ржирж╛</label>
            <input type="email" id="resetEmail" placeholder="ржЖржкржирж╛рж░ рж░рзЗржЬрж┐рж╕рзНржЯрж╛рж░рзНржб ржЗржорзЗржЗрж▓">
        </div>
        <button class="reset-btn">ржкрж╛рж╕ржУрзЯрж╛рж░рзНржб рж░рж┐рж╕рзЗржЯ рж▓рж┐ржВржХ ржкрж╛ржарж╛ржи</button>
        <p class="login-link" onclick="showLogin()">тЖР рж▓ржЧржЗржи ржкрзЗржЬрзЗ ржлрж┐рж░рзЗ ржпрж╛ржи</p>
    </div>

</div>

<div id="notification"></div>

<script>
/* ============== Firebase Config ============== */
const firebaseConfig = {
    apiKey: "AIzaSyBP9zk3Y8wBBCfvnRKmcExMP-uIbINuTwc",
    authDomain: "solar-panel-c798c.firebaseapp.com",
    databaseURL: "https://solar-panel-c798c-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "solar-panel-c798c",
    storageBucket: "solar-panel-c798c.appspot.com",
    messagingSenderId: "619952775462",
    appId: "1:619952775462:web:8e127954fd3cefef2c21e7",
    measurementId: "G-EXYX7GPPR5"
};


firebase.initializeApp(firebaseConfig);

/* ============== Helper Functions ============== */
function togglePassword(id) {
    const input = document.getElementById(id);
    input.type = input.type==='password'?'text':'password';
}
function showNotification(msg, type='info'){
    const el=document.getElementById('notification');
    if(!el){alert(msg);return;}
    el.textContent=msg; el.className=type; el.classList.add('show');
    setTimeout(()=>el.classList.remove('show'),3000);
}
function showLogin(){document.getElementById('loginBox').style.display='block';document.getElementById('registerBox').style.display='none';document.getElementById('forgotPasswordBox').style.display='none';}
function showRegister(){document.getElementById('loginBox').style.display='none';document.getElementById('registerBox').style.display='block';document.getElementById('forgotPasswordBox').style.display='none';}
function showForgotPassword(){document.getElementById('loginBox').style.display='none';document.getElementById('registerBox').style.display='none';document.getElementById('forgotPasswordBox').style.display='block';}

/* ============== Login / Register / Reset ============== */
document.getElementById('loginForm').addEventListener('submit', e=>{
    e.preventDefault();
    const email=document.getElementById('loginEmail').value.trim();
    const password=document.getElementById('loginPassword').value;
    if(!email||!password){showNotification('ржЗржорзЗржЗрж▓ ржПржмржВ ржкрж╛рж╕ржУрзЯрж╛рж░рзНржб ржжрж┐ржи','error');return;}
    showNotification('рж▓ржЧржЗржи ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ...','info');
    firebase.auth().signInWithEmailAndPassword(email,password)
    .then(res=>{
        showNotification('рж▓ржЧржЗржи рж╕ржлрж▓!','success');
        setTimeout(()=>window.location.href='Solar.html',700);
    }).catch(err=>{
        showNotification(err.message,'error');
    });
});

/* Register */
document.querySelector('.register-btn').addEventListener('click', e=>{
    e.preventDefault();
    const email=document.getElementById('registerEmail').value.trim();
    const password=document.getElementById('registerPassword').value;
    const confirmPassword=document.getElementById('confirmPassword').value;
    const fullName=document.getElementById('fullName').value.trim();
    const terms=document.getElementById('acceptTerms');
    if(!email||!password){showNotification('ржЗржорзЗржЗрж▓ ржПржмржВ ржкрж╛рж╕ржУрзЯрж╛рж░рзНржб ржжрж┐ржи','error');return;}
    if(password!==confirmPassword){showNotification('ржкрж╛рж╕ржУрзЯрж╛рж░рзНржб ржорж┐рж▓ржЫрзЗ ржирж╛','error');return;}
    if(password.length<6){showNotification('ржкрж╛рж╕ржУрзЯрж╛рж░рзНржб рзм+ ржЕржХрзНрж╖рж░','error');return;}
    if(!terms.checked){showNotification('рж╕рзЗржмрж╛ рж╢рж░рзНрждрж╛ржмрж▓рзА ржЧрзНрж░рж╣ржг ржХрж░рзБржи','error');return;}
    showNotification('ржЕрзНржпрж╛ржХрж╛ржЙржирзНржЯ рждрзИрж░рж┐ рж╣ржЪрзНржЫрзЗ...','info');
    firebase.auth().createUserWithEmailAndPassword(email,password)
    .then(res=>{
        if(fullName){res.user.updateProfile({displayName:fullName});}
        showNotification('рж░рзЗржЬрж┐рж╕рзНржЯрж╛рж░рзЗрж╢ржи рж╕ржлрж▓!','success');
        setTimeout(()=>window.location.href='Solar.html',700);
    }).catch(err=>showNotification(err.message,'error'));
});

/* Reset Password */
document.querySelector('.reset-btn').addEventListener('click', e=>{
    e.preventDefault();
    const email=document.getElementById('resetEmail').value.trim();
    if(!email){showNotification('ржЗржорзЗржЗрж▓ ржжрж┐ржи','error');return;}
    showNotification('рж░рж┐рж╕рзЗржЯ рж▓рж┐ржВржХ ржкрж╛ржарж╛ржирзЛ рж╣ржЪрзНржЫрзЗ...','info');
    firebase.auth().sendPasswordResetEmail(email)
    .then(()=>{showNotification('рж░рж┐рж╕рзЗржЯ рж▓рж┐ржВржХ ржкрж╛ржарж╛ржирзЛ рж╣ржпрж╝рзЗржЫрзЗ','success'); showLogin();})
    .catch(err=>showNotification(err.message,'error'));
});

/* Google Login */
function handleGoogleLogin(){
    const provider=new firebase.auth.GoogleAuthProvider();
    showNotification('Google рж▓ржЧржЗржи...','info');
    firebase.auth().signInWithPopup(provider)
    .then(res=>{
        showNotification('Google рж▓ржЧржЗржи рж╕ржлрж▓!','success');
        setTimeout(()=>window.location.href='Solar.html',700);
    }).catch(err=>showNotification(err.message,'error'));
}
</script>

</body>
</html>